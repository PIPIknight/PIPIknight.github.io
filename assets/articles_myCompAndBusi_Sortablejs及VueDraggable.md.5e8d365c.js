import{_ as s,c as n,o as a,b as l}from"./app.157a9db3.js";const i=JSON.parse('{"title":"Sortablejs","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u7531_onTapStart\u5230 _prepareDragStart\u5F00\u59CB\u62D6\u62FD","slug":"\u7531-ontapstart\u5230-preparedragstart\u5F00\u59CB\u62D6\u62FD","link":"#\u7531-ontapstart\u5230-preparedragstart\u5F00\u59CB\u62D6\u62FD","children":[{"level":3,"title":"DragStart ( _triggerDragStart )","slug":"dragstart-triggerdragstart","link":"#dragstart-triggerdragstart","children":[]},{"level":3,"title":"DragEnter /  DragOver","slug":"dragenter-dragover","link":"#dragenter-dragover","children":[]}]}],"relativePath":"articles/myCompAndBusi/Sortablejs\u53CAVueDraggable.md"}'),p={name:"articles/myCompAndBusi/Sortablejs\u53CAVueDraggable.md"},o=l(`<h1 id="sortablejs" tabindex="-1">Sortablejs <a class="header-anchor" href="#sortablejs" aria-hidden="true">#</a></h1><p>\u5730\u5740 <a href="http://www.sortablejs.com/" target="_blank" rel="noreferrer">http://www.sortablejs.com/</a></p><p>\u76EE\u524D\u9879\u76EE\u4E2D\u7684\u591A\u9009\u62D6\u62FD\u4EE5\u53CA\u6392\u5E8F\uFF0C\u8FC7\u6EE4\u90FD\u662F\u76F4\u63A5\u4F9D\u8D56\u6216\u8005\u57FA\u4E8Esortablejs\u7684JS\u5E93\u5B9E\u73B0\u7684\u3002</p><p>\u57FA\u4E8EH5\u7684\u62D6\u62FDAPI\uFF0C\u9700\u8981\u4E86\u89E3\u4E24\u4E2A\u5BF9\u8C61\uFF0C\u4EE5\u53CA\u4E00\u4E9B\u4E8B\u4EF6\uFF1A</p><p>\u62D6\u52A8\u5143\u7D20\uFF0C\u88AB\u62D6\u8D77\u7684\u5143\u7D20 ( dragEl )</p><p>\u76EE\u6807\u5143\u7D20\uFF0C\u88AB\u62D6\u62FD\u7684\u5143\u7D20\u5C06\u8981\u88AB\u653E\u7F6E\u7684\u53C2\u7167\u7269 ( target )</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLElement/drag_event" target="_blank" rel="noreferrer">https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLElement/drag_event</a></p><p>dragstart\uFF1A\u5F53\u7528\u6237\u5F00\u59CB\u62D6\u52A8\u4E00\u4E2A\u5143\u7D20\u6216\u8005\u4E00\u4E2A\u9009\u62E9\u6587\u672C\u7684\u65F6\u5019 dragstart \u4E8B\u4EF6\u5C31\u4F1A\u89E6\u53D1\u3002</p><p>dragend\uFF1Adragend \u4E8B\u4EF6\u5728\u62D6\u653E\u64CD\u4F5C\u7ED3\u675F\u65F6\u89E6\u53D1\uFF08\u901A\u8FC7\u91CA\u653E\u9F20\u6807\u6309\u94AE\u6216\u5355\u51FB escape \u952E\uFF09\u3002</p><p>dragover\uFF1A\u5F53\u5143\u7D20\u6216\u8005\u9009\u62E9\u7684\u6587\u672C\u88AB\u62D6\u62FD\u5230\u4E00\u4E2A\u6709\u6548\u7684\u653E\u7F6E\u76EE\u6807\u4E0A\u65F6\uFF0C\u89E6\u53D1 dragover \u4E8B\u4EF6\uFF08\u6BCF\u51E0\u767E\u6BEB\u79D2\u89E6\u53D1\u4E00\u6B21\uFF09\u3002</p><p>drop\uFF1A<strong><code>drop</code></strong> \u4E8B\u4EF6\u5728\u5143\u7D20\u6216\u9009\u4E2D\u7684\u6587\u672C\u88AB\u653E\u7F6E\u5728\u6709\u6548\u7684\u653E\u7F6E\u76EE\u6807\u4E0A\u65F6\u88AB\u89E6\u53D1\u3002</p><p>sortablejs\u4F7F\u7528\uFF1A</p><div class="language-js"><button class="copy"></button><span class="lang">js</span><pre><code><span class="line"><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Sortable</span><span style="color:#A6ACCD;">( HTMLElement </span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">...</span><span style="color:#A6ACCD;">configs</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><p>\u90A3\u63A5\u4E0B\u6765\u8BA9\u6211\u4EEC\u770B\u770Bsortablejs\u5230\u5E95\u505A\u4E86\u4E9B\u4EC0\u4E48\uFF1A</p><div class="language-js"><button class="copy"></button><span class="lang">js</span><pre><code><span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> expando </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Sortable</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Date</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getTime</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">......</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> (</span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">(el </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> el</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">nodeType </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> el</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">nodeType </span><span style="color:#89DDFF;">===</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">)) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// \u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014 \u83B7\u53D6\u7ED1\u5B9A\u7684htmlElement \u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014 </span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">throw</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Sortable: \`el\` must be an HTMLElement, not </span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">concat</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{}.</span><span style="color:#A6ACCD;">toString</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">call</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">el</span><span style="color:#F07178;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">el </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> el</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// root element</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">options </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> options </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">_extends</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{},</span><span style="color:#A6ACCD;"> options)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Export instance</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    el[expando] </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">this;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">	</span><span style="color:#676E95;">// \u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014 \u8BBE\u7F6E\u914D\u7F6E\u9879\u548C\u65B9\u6CD5 \u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014 </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> defaults </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">...</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">       </span></span>
<span class="line"><span style="color:#A6ACCD;">    PluginManager</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">initializePlugins</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">this,</span><span style="color:#A6ACCD;"> el</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> defaults)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Set default options</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">for</span><span style="color:#A6ACCD;"> (</span><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> name </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;"> defaults) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">!</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">name</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">in</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">options</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">options</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">name</span><span style="color:#F07178;">] </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">defaults</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">name</span><span style="color:#F07178;">])</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">_prepareGroup</span><span style="color:#A6ACCD;">(options)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Bind all private methods</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">	</span><span style="color:#676E95;">// \u8FD9\u91CC\u8981\u6CE8\u610F\uFF0C\u662F\u5C06\u539F\u578B\u65B9\u6CD5\u8F6C\u4E3A\u79C1\u6709\uFF0C\u56E0\u4E3A\u6BCF\u4E2A Sortable \u5BF9\u8C61\u73B0\u5728\u90FD\u662F\u72EC\u7ACB\u7684</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">for</span><span style="color:#A6ACCD;"> (</span><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> fn </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">this</span><span style="color:#A6ACCD;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">fn</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">charAt</span><span style="color:#F07178;">(</span><span style="color:#F78C6C;">0</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">_</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">typeof</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">fn</span><span style="color:#F07178;">] </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">function</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">this</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">fn</span><span style="color:#F07178;">] </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">fn</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">bind</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Setup drag mode</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">nativeDraggable </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> options</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">forceFallback </span><span style="color:#89DDFF;">?</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> supportDraggable</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> (</span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">nativeDraggable) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;">// Touch start threshold cannot be greater than the native dragstart threshold</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">touchStartThreshold</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Bind events</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">	</span><span style="color:#676E95;">// \u7ED1\u5B9A\u9F20\u6807\u4E8B\u4EF6\uFF0C\u62D6\u62FD\u524D\u51C6\u5907\uFF0C\u62D6\u62FD\u5F00\u59CB\uFF0C\u62D6\u62FD\u4E2D</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> (options</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">supportPointer) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#82AAFF;">on</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">el</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">pointerdown</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">_onTapStart</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">else</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#82AAFF;">on</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">el</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">mousedown</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">_onTapStart</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#82AAFF;">on</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">el</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">touchstart</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">_onTapStart</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> (</span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">nativeDraggable) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#82AAFF;">on</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">el</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">dragover</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#82AAFF;">on</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">el</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">dragenter</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    sortables</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">push</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">el)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Restore sorting</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    options</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">store </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> options</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">store</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">get </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">sort</span><span style="color:#A6ACCD;">(options</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">store</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">this</span><span style="color:#A6ACCD;">) </span><span style="color:#89DDFF;">||</span><span style="color:#A6ACCD;"> [])</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// Add animation state manager</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">_extends</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">this,</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">AnimationStateManager</span><span style="color:#A6ACCD;">())</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"></span></code></pre></div><p>\u51C6\u5907\u5DE5\u4F5C\u7684\u5185\u5BB9\u4E0D\u518D\u8D58\u8FF0\uFF0C\u53EF\u4EE5\u67E5\u770B\u6E90\u7801\u8F83\u597D\u7406\u89E3\uFF0C\u6211\u4EEC\u63A5\u4E0B\u6765\u770B\u770Bsortable\u7ED1\u5B9A\u76D1\u542C\u4E2D\u7684\u51E0\u4E2A\u91CD\u8981\u51FD\u6570 \u3002</p><h2 id="\u7531-ontapstart\u5230-preparedragstart\u5F00\u59CB\u62D6\u62FD" tabindex="-1">\u7531_onTapStart\u5230 _prepareDragStart\u5F00\u59CB\u62D6\u62FD <a class="header-anchor" href="#\u7531-ontapstart\u5230-preparedragstart\u5F00\u59CB\u62D6\u62FD" aria-hidden="true">#</a></h2><p>_onTrapStart \u662F _prepareDragStart \u7684\u4E00\u7CFB\u5217\u524D\u7F6E\u5DE5\u4F5C\uFF0C\u4E3B\u8981\u5224\u65AD\u8FC7\u6EE4\u6389\u65E0\u6CD5\u62D6\u62FD\u7684\u5143\u7D20\uFF0C\u89E6\u53D1\u62D6\u62FD\u7684\u65F6\u673A\uFF0C\u8BBE\u7F6EoldIndex\u7B49\uFF0C\u5F53\u8FD9\u4E9B\u90FD\u5904\u7406\u5B8C\u6BD5\uFF0C\u90A3\u4E48\u5C31\u53EF\u4EE5\u5F00\u59CB\u62D6\u62FD\u4E86\u3002</p><div class="language-js"><button class="copy"></button><span class="lang">js</span><pre><code><span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">_onTapStart</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">_onTapStart</span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#89DDFF;">	 </span><span style="color:#676E95;">// ...... \u7701\u7565\u5168\u90E8\u5224\u65AD\u8FC7\u7A0B\uFF08\u8FD9\u4E0D\u662F\u91CD\u70B9\uFF09 ......</span></span>
<span class="line"><span style="color:#A6ACCD;">      this._prepareDragStart(</span><span style="color:#A6ACCD;">evt</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">touch</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">target</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span><span style="color:#89DDFF;">,</span></span>
<span class="line"></span></code></pre></div><p>\u5F53\u524D\u5143\u7D20\u5DF2\u88AB\u5141\u8BB8\u62D6\u62FD \uFF08 \u901A\u8FC7 _onTapStart \uFF09\uFF0C\u5F00\u59CB\u51C6\u5907\uFF01\uFF08 \u89E6\u6478\u62D6\u62FD\u7684\u903B\u8F91\u7C7B\u4F3C\uFF0C\u53EA\u662F\u6B65\u9AA4\u5904\u7406\u7A0D\u6709\u4E0D\u540C\uFF0C\u8FD9\u91CC\u4E0D\u6BD4\u8F83\u5176\u533A\u522B \uFF0C\u5EF6\u8FDF\u89E6\u53D1\u4E5F\u53EA\u662F\u5904\u7406\u8FC7\u7A0B\u5DEE\u5F02\uFF0C\u4E5F\u4E0D\u62A4\u91CD\u70B9\u53BB\u8BF4\u660E\uFF01\uFF09</p><div class="language-js"><button class="copy"></button><span class="lang">js</span><pre><code><span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">_prepareDragStart</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">_prepareDragStart</span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">/** Event */</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#A6ACCD;">evt</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">/** Touch */</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#A6ACCD;">touch</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">/** HTMLElement */</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#A6ACCD;">target</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">_this</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this,</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#A6ACCD;">el</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">_this</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">el</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#A6ACCD;">options</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">_this</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#A6ACCD;">ownerDocument</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">el</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ownerDocument</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#A6ACCD;">dragStartFn</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">       </span><span style="color:#676E95;">// \u5B58\u5728\u88AB\u62D6\u62FD\u5143\u7D20\uFF0C\u4E14\u4E0D\u5B58\u5728\u5DF2\u88AB\u62D6\u62FD\u5143\u7D20\uFF0C\u4E14\u88AB\u62D6\u62FD\u5143\u7D20\u662F\u5BB9\u5668\u5143\u7D20\u7684\u5B50\u5143\u7D20</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">target</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">dragEl</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">target</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">parentNode</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">el</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">         </span><span style="color:#676E95;">// \u4FDD\u5B58\u62D6\u52A8\u5143\u7D20\u7684\u4FE1\u606F</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">dragRect</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">getRect</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">target</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">rootEl</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">el</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// \u88AB\u6CE8\u518C\u7684\u5BB9\u5668\u5143\u7D20</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">dragEl</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">target</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// \u88AB\u62D6\u62FD\u7684\u76EE\u6807\u5143\u7D20</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">parentEl</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">dragEl</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">parentNode</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// \u88AB\u62D6\u62FD\u5143\u7D20\u7684\u7236\u5143\u7D20</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">nextEl</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">dragEl</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">nextSibling</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// \u88AB\u62D6\u62FD\u5143\u7D20\u7684\u4E0B\u4E00\u4E2A\u5143\u7D20</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">lastDownEl</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">target</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// \u6700\u7EC8\u88AB\u653E\u4E0B\u7684\u5143\u7D20</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">activeGroup</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">group</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// \u88AB\u6FC0\u6D3B\u7684\u5141\u8BB8\u62D6\u62FD\u8FDB\u5165\u7684group\u7EC4</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">Sortable</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">dragged</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">dragEl</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// \u5B58\u50A8\u5F53\u524D\u88AB\u62D6\u62FD\u7684\u5143\u7D20</span></span>
<span class="line"><span style="color:#89DDFF;">		</span><span style="color:#676E95;">// \u3002\u3002\u3002\u3002\u3002\u3002</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">// \u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014 \u5F00\u59CB\u51FD\u6570 \u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014  </span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#82AAFF;">dragStartFn</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">dragStartFn</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">		 </span><span style="color:#676E95;">// \u3002\u3002\u3002\u3002\u3002\u3002</span></span>
<span class="line"><span style="color:#89DDFF;">		 </span><span style="color:#676E95;">// \u89E6\u53D1 dragStart</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#A6ACCD;">_this</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">_triggerDragStart</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">evt</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">touch</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// Drag start event</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">		 </span><span style="color:#676E95;">// \u89E6\u53D1\u9009\u4E2D\u4E8B\u4EF6</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#82AAFF;">_dispatchEvent</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">            sortable</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">_this</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">            name</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">choose</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">            originalEvent</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">evt</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// Chosen item</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">          </span><span style="color:#676E95;">// \u5207\u6362\u62D6\u62FD\u6837\u5F0F</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#82AAFF;">toggleClass</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">dragEl</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">chosenClass</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">};</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// Disable &quot;draggable&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">// \u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014 \u5F00\u59CB\u51FD\u6570 \u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014  </span></span>
<span class="line"><span style="color:#F07178;">          </span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">// \u53BB\u9664\u4E0D\u53EF\u62D6\u62FD\u9879\uFF01</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ignore</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">split</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">forEach</span><span style="color:#F07178;">(</span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">criteria</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#82AAFF;">find</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">dragEl</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">criteria</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">trim</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">_disableDraggable</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">          </span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">// \u51C6\u5907\u5B8C\u6BD5\uFF0C\u5F00\u59CB\u7ED1\u5B9A\u6574\u4E2A\u62D6\u62FD\u6D41\u7A0B\u4E2D\u7528\u5230\u7684\u76D1\u542C\u4E8B\u4EF6</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#82AAFF;">on</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">ownerDocument</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">dragover</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">nearestEmptyInsertDetectEvent</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#82AAFF;">on</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">ownerDocument</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">mousemove</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">nearestEmptyInsertDetectEvent</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#82AAFF;">on</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">ownerDocument</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">touchmove</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">nearestEmptyInsertDetectEvent</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#82AAFF;">on</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">ownerDocument</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">mouseup</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">_this</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">_onDrop</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#82AAFF;">on</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">ownerDocument</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">touchend</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">_this</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">_onDrop</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#82AAFF;">on</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">ownerDocument</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">touchcancel</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">_this</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">_onDrop</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">		</span><span style="color:#676E95;">// \u4EE5\u4E0B\u7701\u7565\u3002\u3002\u3002\u3002\u3002\u3002</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"></span></code></pre></div><h3 id="dragstart-triggerdragstart" tabindex="-1">DragStart ( _triggerDragStart ) <a class="header-anchor" href="#dragstart-triggerdragstart" aria-hidden="true">#</a></h3><p>\u51C6\u5907\u90FD\u505A\u597D\u4E86\uFF0C\u7EC8\u4E8E\u5F00\u59CB\u62D6\u62FD\u4E86\uFF0C\u770B\u770B\u5F00\u59CB\u62D6\u62FD\u90FD\u5E72\u4E86\u4EC0\u4E48\u3002</p><div class="language-js"><button class="copy"></button><span class="lang">js</span><pre><code><span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">_onDragStart</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">_onDragStart</span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">/**Event*/</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#A6ACCD;">evt</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">/**boolean*/</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#A6ACCD;">fallback</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">_this</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this;</span></span>
<span class="line"><span style="color:#89DDFF;">	  </span><span style="color:#676E95;">// \`DataTransfer\` \u5BF9\u8C61\u7528\u4E8E\u4FDD\u5B58\u62D6\u52A8\u5E76\u653E\u4E0B\uFF08drag and drop\uFF09\u8FC7\u7A0B\u4E2D\u7684\u6570\u636E\u3002\u5B83\u53EF\u4EE5\u4FDD\u5B58\u4E00\u9879\u6216\u591A\u9879\u6570\u636E\uFF0C\u8FD9\u4E9B\u6570\u636E\u9879\u53EF\u4EE5\u662F\u4E00\u79CD\u6216\u8005\u591A\u79CD\u6570\u636E\u7C7B\u578B\u3002</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;">// https://developer.mozilla.org/zh-CN/docs/Web/API/DataTransfer</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">dataTransfer</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">evt</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">dataTransfer</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">options</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">_this</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#82AAFF;">pluginEvent</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">dragStart</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        evt</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">evt</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">Sortable</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">eventCanceled</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">_onDrop</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">return</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">	</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;">// \u514B\u9686\u88AB\u62D6\u62FD\u7684\u5143\u7D20( \u591A\u9009\u62D6\u62FD\u53EF\u4EE5\u8003\u8651\u4ECE\u8FD9\u91CC\u5165\u624B\u6539\u9020\uFF01 )  </span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#82AAFF;">pluginEvent</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">setupClone</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">Sortable</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">eventCanceled</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">cloneEl</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">clone</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">dragEl</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">cloneEl</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">removeAttribute</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">id</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">cloneEl</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">draggable</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">cloneEl</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">style</span><span style="color:#F07178;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">will-change</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">] </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">_hideClone</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#82AAFF;">toggleClass</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">cloneEl</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">chosenClass</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">Sortable</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">clone</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">cloneEl</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// #1143: IFrame support workaround</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">_this</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">cloneId</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">_nextTick</span><span style="color:#F07178;">(</span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#82AAFF;">pluginEvent</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">clone</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">_this</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">Sortable</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">eventCanceled</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">return</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">_this</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">removeCloneOnHide</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#A6ACCD;">rootEl</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">insertBefore</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">cloneEl</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">dragEl</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">_this</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">_hideClone</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">          </span></span>
<span class="line"><span style="color:#89DDFF;">	   </span><span style="color:#676E95;">// _dispatchEvent \u4F1A\u901A\u8FC7 new window.CustomEvent \u6784\u9020\u4E00\u4E2A\u4E8B\u4EF6\u5BF9\u8C61\uFF0C\u5C06\u62D6\u62FD\u5143\u7D20\u7684\u4FE1\u606F\u6DFB\u52A0\u5230\u81EA\u5B9A\u4E49\u4E8B\u4EF6\u5BF9\u8C61\u4E0A\uFF0C\u4F20\u9012\u7ED9\u5916\u90E8\u7684\u6CE8\u518C\u4E8B\u4EF6\u51FD\u6570</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#82AAFF;">_dispatchEvent</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">          sortable</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">_this</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">          name</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">clone</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">fallback</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">toggleClass</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">dragEl</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">dragClass</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;">// Set proper drop events</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">	</span><span style="color:#676E95;">// \u3002\u3002\u3002\u3002\u3002\u3002</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"></span></code></pre></div><p>dragStart \u4E3B\u8981\u7684\u5DE5\u4F5C\u662F\u4E3A\u62D6\u62FD\u514B\u9686\u5143\u7D20\u3002</p><h3 id="dragenter-dragover" tabindex="-1">DragEnter / DragOver <a class="header-anchor" href="#dragenter-dragover" aria-hidden="true">#</a></h3><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLElement/dragenter_event" target="_blank" rel="noreferrer">dragenter</a>\uFF1A\u5F53\u62D6\u52A8\u7684\u5143\u7D20\u6216\u88AB\u9009\u62E9\u7684\u6587\u672C\u8FDB\u5165\u6709\u6548\u7684\u653E\u7F6E\u76EE\u6807\u65F6\uFF0C dragenter \u4E8B\u4EF6\u88AB\u89E6\u53D1\u3002</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLElement/dragover_event" target="_blank" rel="noreferrer">dragover</a>\uFF1A\u5F53\u5143\u7D20\u6216\u8005\u9009\u62E9\u7684\u6587\u672C\u88AB\u62D6\u62FD\u5230\u4E00\u4E2A\u6709\u6548\u7684\u653E\u7F6E\u76EE\u6807\u4E0A\u65F6\uFF0C\u89E6\u53D1 <code>dragover</code> \u4E8B\u4EF6\uFF08\u6BCF\u51E0\u767E\u6BEB\u79D2\u89E6\u53D1\u4E00\u6B21\uFF09\u3002\u8FD9\u4E2A\u4E8B\u4EF6\u5728\u53EF\u88AB\u653E\u7F6E\u5143\u7D20\u7684\u8282\u70B9\u4E0A\u89E6\u53D1\u3002</p><p>\u63A5\u4E0B\u6765\u5C31\u662F DragEnter / DragOver \u7684\u5904\u7406\u65B9\u6CD5 <strong>_onDragover</strong>\uFF0ChandleEvent \u5C06\u4E24\u8005\u7684\u4E8B\u4EF6\u903B\u8F91\u4EA4\u7531 _onDragOver \u6765\u7EDF\u4E00\u5904\u7406\u4E86\u3002</p><p>onDragover \u5B58\u5728\u591A\u4E2A\u9636\u6BB5\uFF0C\u6BCF\u4E2A\u9636\u6BB5\u90FD\u6709\u5BF9\u5E94\u7684\u5904\u7406\u65B9\u6CD5\uFF1A</p><p>\u7531\u4E8E <strong>_onDragover</strong> \u4EE3\u7801\u8F83\u591A\uFF0C\u6545\u53EA\u622A\u53D6\u90E8\u5206\uFF1A</p><div class="language-js"><button class="copy"></button><span class="lang">js</span><pre><code><span class="line"></span>
<span class="line"></span></code></pre></div>`,32),e=[o];function t(r,c,F,D,y,A){return a(),n("div",null,e)}const g=s(p,[["render",t]]);export{i as __pageData,g as default};
